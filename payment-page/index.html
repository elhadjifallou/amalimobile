<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AMALI - Paiement Premium</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
    </style>
</head>
<body class="bg-gradient-to-b from-slate-50 to-white min-h-screen">
    <div class="max-w-md mx-auto px-5 py-8">
        <!-- Header -->
        <div class="text-center mb-8">
            <div class="w-16 h-16 bg-gradient-to-br from-orange-500 to-amber-600 rounded-2xl flex items-center justify-center mx-auto mb-4">
                <svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clip-rule="evenodd" />
                </svg>
            </div>
            <h1 class="text-2xl font-bold text-slate-900 mb-2">AMALI Premium</h1>
            <p class="text-slate-600">Paiement sécurisé</p>
        </div>

        <!-- Plan sélectionné -->
        <div id="selectedPlan" class="bg-white rounded-2xl shadow-lg border-2 border-orange-500 p-6 mb-6">
            <div class="flex items-center justify-between mb-4">
                <div>
                    <h2 class="text-xl font-bold text-slate-900" id="planName">Élite</h2>
                    <p class="text-slate-600">Abonnement mensuel</p>
                </div>
                <div class="text-right">
                    <p class="text-3xl font-bold text-slate-900" id="planPrice">4 900</p>
                    <p class="text-slate-600">FCFA</p>
                </div>
            </div>
            
            <!-- Features du plan -->
            <div class="space-y-2 pt-4 border-t border-slate-200">
                <div class="flex items-center gap-2 text-sm text-slate-700">
                    <svg class="w-5 h-5 text-emerald-600" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                    </svg>
                    <span>100 likes par jour</span>
                </div>
                <div class="flex items-center gap-2 text-sm text-slate-700">
                    <svg class="w-5 h-5 text-emerald-600" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                    </svg>
                    <span>Voir qui vous a aimé</span>
                </div>
                <div class="flex items-center gap-2 text-sm text-slate-700">
                    <svg class="w-5 h-5 text-emerald-600" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                    </svg>
                    <span>Annuler un swipe</span>
                </div>
            </div>
        </div>

        <!-- Méthodes de paiement -->
        <div class="mb-6">
            <h3 class="font-semibold text-slate-900 mb-4">Choisir une méthode de paiement</h3>
            
            <div class="space-y-3">
                <!-- Orange Money -->
                <button onclick="selectPaymentMethod('orange-money')" 
                    class="payment-method w-full p-4 bg-white border-2 border-slate-200 rounded-xl hover:border-orange-500 transition-all flex items-center gap-4"
                    data-method="orange-money">
                    <div class="w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center">
                        <svg class="w-8 h-8 text-orange-600" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M2 10a8 8 0 018-8v8h8a8 8 0 11-16 0z"/>
                            <path d="M12 2.252A8.014 8.014 0 0117.748 8H12V2.252z"/>
                        </svg>
                    </div>
                    <div class="flex-1 text-left">
                        <p class="font-semibold text-slate-900">Orange Money</p>
                        <p class="text-sm text-slate-600">Paiement mobile Orange</p>
                    </div>
                    <svg class="w-6 h-6 text-slate-400 checkmark hidden" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                    </svg>
                </button>

                <!-- Wave -->
                <button onclick="selectPaymentMethod('wave')" 
                    class="payment-method w-full p-4 bg-white border-2 border-slate-200 rounded-xl hover:border-blue-500 transition-all flex items-center gap-4"
                    data-method="wave">
                    <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center">
                        <svg class="w-8 h-8 text-blue-600" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"/>
                        </svg>
                    </div>
                    <div class="flex-1 text-left">
                        <p class="font-semibold text-slate-900">Wave</p>
                        <p class="text-sm text-slate-600">Paiement mobile Wave</p>
                    </div>
                    <svg class="w-6 h-6 text-slate-400 checkmark hidden" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                    </svg>
                </button>

                <!-- Carte bancaire -->
                <button onclick="selectPaymentMethod('card')" 
                    class="payment-method w-full p-4 bg-white border-2 border-slate-200 rounded-xl hover:border-purple-500 transition-all flex items-center gap-4"
                    data-method="card">
                    <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center">
                        <svg class="w-8 h-8 text-purple-600" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M4 4a2 2 0 00-2 2v1h16V6a2 2 0 00-2-2H4z"/>
                            <path fill-rule="evenodd" d="M18 9H2v5a2 2 0 002 2h12a2 2 0 002-2V9zM4 13a1 1 0 011-1h1a1 1 0 110 2H5a1 1 0 01-1-1zm5-1a1 1 0 100 2h1a1 1 0 100-2H9z" clip-rule="evenodd"/>
                        </svg>
                    </div>
                    <div class="flex-1 text-left">
                        <p class="font-semibold text-slate-900">Carte bancaire</p>
                        <p class="text-sm text-slate-600">Visa, Mastercard</p>
                    </div>
                    <svg class="w-6 h-6 text-slate-400 checkmark hidden" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Formulaire de paiement (caché par défaut) -->
        <div id="paymentForm" class="hidden mb-6">
            <div class="bg-white rounded-2xl shadow-sm border border-slate-200 p-6">
                <h3 class="font-semibold text-slate-900 mb-4">Informations de paiement</h3>
                
                <!-- Numéro de téléphone (Orange Money / Wave) -->
                <div id="phoneSection" class="mb-4">
                    <label class="block text-sm font-medium text-slate-700 mb-2">
                        Numéro de téléphone
                    </label>
                    <input 
                        type="tel" 
                        id="phoneNumber"
                        placeholder="77 123 45 67"
                        class="w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent"
                    >
                </div>

                <!-- Email -->
                <div class="mb-4">
                    <label class="block text-sm font-medium text-slate-700 mb-2">
                        Email (pour la confirmation)
                    </label>
                    <input 
                        type="email" 
                        id="email"
                        placeholder="votre@email.com"
                        class="w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent"
                    >
                </div>
            </div>
        </div>

        <!-- Bouton de paiement -->
        <button 
            id="payButton"
            onclick="processPayment()"
            disabled
            class="w-full py-4 bg-gradient-to-r from-orange-600 to-amber-600 text-white rounded-xl font-semibold hover:from-orange-700 hover:to-amber-700 transition-all shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed mb-4"
        >
            Choisissez une méthode de paiement
        </button>

        <!-- Note de sécurité -->
        <div class="bg-emerald-50 rounded-xl p-4 border border-emerald-200">
            <div class="flex items-start gap-3">
                <svg class="w-5 h-5 text-emerald-600 flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                </svg>
                <div>
                    <p class="text-sm font-medium text-emerald-900">Paiement 100% sécurisé</p>
                    <p class="text-xs text-emerald-700 mt-1">Vos informations sont protégées et cryptées</p>
                </div>
            </div>
        </div>

        <!-- Loading spinner (caché par défaut) -->
        <div id="loadingSpinner" class="hidden fixed inset-0 bg-black/50 flex items-center justify-center z-50">
            <div class="bg-white rounded-2xl p-8 text-center">
                <div class="w-16 h-16 border-4 border-orange-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"></div>
                <p class="text-slate-900 font-semibold">Traitement en cours...</p>
                <p class="text-slate-600 text-sm mt-1">Veuillez patienter</p>
            </div>
        </div>
    </div>

    <script>
        // Récupérer les paramètres de l'URL
        const urlParams = new URLSearchParams(window.location.search);
        const planId = urlParams.get('plan') || 'elite';
        const userId = urlParams.get('user') || '';
        
        // Configuration des plans
        const plans = {
            'essentiel': {
                name: 'Essentiel',
                price: '2 900',
                features: ['80 likes par jour', '5 super likes par jour']
            },
            'elite': {
                name: 'Élite',
                price: '4 900',
                features: ['100 likes par jour', 'Voir qui vous a aimé', 'Annuler un swipe']
            },
            'prestige': {
                name: 'Prestige',
                price: '7 900',
                features: ['Likes illimités', 'Appels vidéo', 'Visibilité maximale']
            },
            'prestige-femme': {
                name: 'Prestige Femme',
                price: '2 000',
                features: ['Likes illimités', 'Sécurité renforcée']
            }
        };

        // Afficher le plan sélectionné
        const plan = plans[planId];
        if (plan) {
            document.getElementById('planName').textContent = plan.name;
            document.getElementById('planPrice').textContent = plan.price;
        }

        let selectedMethod = null;

        // Sélection de la méthode de paiement
        function selectPaymentMethod(method) {
            selectedMethod = method;
            
            // Retirer la sélection de tous les boutons
            document.querySelectorAll('.payment-method').forEach(btn => {
                btn.classList.remove('border-orange-500', 'border-blue-500', 'border-purple-500', 'bg-orange-50', 'bg-blue-50', 'bg-purple-50');
                btn.classList.add('border-slate-200');
                btn.querySelector('.checkmark').classList.add('hidden');
            });

            // Ajouter la sélection au bouton cliqué
            const selectedBtn = document.querySelector(`[data-method="${method}"]`);
            selectedBtn.classList.remove('border-slate-200');
            
            if (method === 'orange-money') {
                selectedBtn.classList.add('border-orange-500', 'bg-orange-50');
            } else if (method === 'wave') {
                selectedBtn.classList.add('border-blue-500', 'bg-blue-50');
            } else if (method === 'card') {
                selectedBtn.classList.add('border-purple-500', 'bg-purple-50');
            }
            
            selectedBtn.querySelector('.checkmark').classList.remove('hidden');
            selectedBtn.querySelector('.checkmark').classList.remove('text-slate-400');
            selectedBtn.querySelector('.checkmark').classList.add('text-emerald-600');

            // Afficher le formulaire
            document.getElementById('paymentForm').classList.remove('hidden');
            
            // Activer le bouton de paiement
            const payButton = document.getElementById('payButton');
            payButton.disabled = false;
            payButton.textContent = `Payer ${plan.price} FCFA`;
        }

        // Traiter le paiement
        function processPayment() {
            const phone = document.getElementById('phoneNumber').value;
            const email = document.getElementById('email').value;

            if (!email || !email.includes('@')) {
                alert('Veuillez entrer une adresse email valide');
                return;
            }

            if ((selectedMethod === 'orange-money' || selectedMethod === 'wave') && !phone) {
                alert('Veuillez entrer votre numéro de téléphone');
                return;
            }

            // Afficher le spinner
            document.getElementById('loadingSpinner').classList.remove('hidden');

            // Simuler le traitement (à remplacer par une vraie API)
            setTimeout(() => {
                // Préparer les données de paiement
                const paymentData = {
                    plan: planId,
                    method: selectedMethod,
                    phone: phone,
                    email: email,
                    userId: userId,
                    amount: plan.price
                };

                // Envoyer vers votre API Laravel
                // fetch('https://votre-backend.com/api/payment/process', {
                //     method: 'POST',
                //     headers: { 'Content-Type': 'application/json' },
                //     body: JSON.stringify(paymentData)
                // })
                // .then(response => response.json())
                // .then(data => {
                //     if (data.success) {
                //         window.location.href = `success.html?transaction=${data.transactionId}`;
                //     }
                // });

                // Pour le moment, simuler le succès
                console.log('Données de paiement:', paymentData);
                window.location.href = `success.html?plan=${planId}&method=${selectedMethod}`;
            }, 2000);
        }
    </script>
</body>
</html>
